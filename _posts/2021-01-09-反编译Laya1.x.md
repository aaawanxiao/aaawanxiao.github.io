---
title: 反编译Laya1.x资源场景
subtitle: '反编译Laya1.x场景文件资源代码'
author: 王壮壮
layout: post
date: 2021-01-09
categories: [Laya]
tags: [Laya]
---
 
### 
	由于源码丢失只有一个发布后的源码 需要二次开发，只能把发布后的代码还原成工程进行二次开发。不足就是，资源已经被压缩过了，不是最高清了。代码也有被压缩过，但是不影响开发
 
# 解决过程

### 技术分析。
    首先是先把资源全down下来。
	然后把布局文件拆分还原成工程布局文件。
	再把代码拆分成一个个功能文件。
	使用到工具：
		浏览器。python layaIde1.7x
		如果有version.json 那么恭喜你资源基本就全拿到了。
		如果没有那就只能采用嗅探方式获取资源了。
		获取资源后拆分大图为小图。工具可以找我拿。
		
	因为是1.x 所以布局文件全都在layaUI.max.all.js文件里面  

### 下面直接贴代码


1. 简单的控制台获取布局文件


```javascript 
		//简单的线上解析布局文件下载 然后python组装布局文件
		var script = document.createElement('script');
        script.src = "https://cdn.bootcdn.net/ajax/libs/FileSaver.js/2.0.5/FileSaver.js";
        document.getElementsByTagName('head')[0].appendChild(script);

        try {
            var isFileSaverSupported = !!new Blob;
        } catch (e) {
            console.log("不支持")
        }

		//全部布局文件
        uiMgr = {}
        for (var key in ui) {
             let uiobj = ui[key];
             let json = {className:"ui."+key,view:JSON.stringify(uiobj.uiView)}
             uiMgr[key] = json;
        }
        var blob = new Blob([JSON.stringify(uiMgr)], {type: "text/plain;charset=utf-8"});
        saveAs(blob, "uiview.json");

```


2. python组装布局文件

```Python
 

```
 
*** 
### 总结： 遇事不要慌，发个朋友全 。

 
``` 



